exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway
exec-once = swaync

$wallpaper = https://media.idownloadblog.com/wp-content/uploads/2018/06/macOS-Mojave-Day-wallpaper.jpg
exec = sh -c 'if [  ! -f ~/.local/share/hyprland/wallpaper ]; then $(mkdir -p ~/.local/share/hyprland && curl $wallpaper -o ~/.local/share/hyprland/wallpaper); fi'
$lock = https://s4827.pcdn.co/wp-content/uploads/2018/06/macOS_mojave_night_desert.jpg
exec = sh -c 'if [  ! -f ~/.local/share/hyprland/lock ]; then $(mkdir -p ~/.local/share/hyprland && curl $lock -o ~/.local/share/hyprland/lock); fi'

# catppuccin-frappe gtk theme
exec = sh -c 'ctp-version="v0.6.1" && if [ ! -e ~/.themes/Catppuccin-Frappe-Standard-Lavender-dark ]; then mkdir -p ~/.themes && curl -L https://github.com/catppuccin/gtk/releases/download/$ctp-version/Catppuccin-Frappe-Standard-Lavender-dark.zip -o ~/.themes/catppuccin.zip && unzip ~/.themes/catppuccin.zip -d ~/.themes/ && rm -rf ~/.themes/catppuccin.zip; fi'

# gruvbox gtk theme
# exec = sh -c 'if [  ! -f ~/.themes/gruvbox/README.md ]; then $(mkdir -p ~/.themes && git clone https://github.com/jmattheis/gruvbox-dark-gtk ~/.themes/gruvbox); fi'

# firefox theme
exec = sh -c "pdir=$(ls .mozilla/firefox/ | grep '.default' | awk -F' ' '{printf $NF}') && if [ ! -f ~/.mozilla/firefox/\$pdir/chrome/userChrome.css ]; then pdir=$(ls .mozilla/firefox/ | grep '.default' | awk -F' ' '{printf $NF}') && mkdir -p ~/.mozilla/firefox/\$pdir/chrome && curl https://raw.githubusercontent.com/Dook97/firefox-qutebrowser-userchrome/master/userChrome.css -o ~/.mozilla/firefox/\$pdir/chrome/userChrome.css; fi"

exec = pkill waybar; waybar
exec = pkill swaybg; swaybg -i .local/share/hyprland/wallpaper;

monitor = ,highres,auto,1
# blur on tofi
layerrule = blur,launcher
layerrule = blur,waybar

general {
  layout = master
  max_fps=60
  border_size=1
  gaps_in=5
  gaps_out=10
}

decoration {
  blur=true
  blur_size = 3
  blur_passes = 2
  blur_new_optimizations = on
  rounding=10
}

animations {
  enabled=1
}

misc {
  disable_hyprland_logo = true
  enable_swallow = true
  swallow_regex = ^(wezterm|footclient|foot|Alacritty|kitty)$
  focus_on_activate = true
  no_direct_scanout = false
  mouse_move_enables_dpms = true
  vfr = true
  vrr = 0
  animate_manual_resizes = true
  mouse_move_focuses_monitor = true
}

debug {
  damage_tracking = 1
  disable_logs = true
  disable_time = true
}

input {
  kb_layout = us(altgr-intl)
  kb_options = eurosign:5
  follow_mouse = 1
  touchpad {
    middle_button_emulation = true
    tap-to-click = true
  }
}

gestures {
  workspace_swipe = true
  workspace_swipe_fingers = 3
  workspace_swipe_invert = false
}

# personal
  # general
  bind = SUPER,      e,      exec, pkill Hyprland
  bind = SUPER,      r,      exec, hyprctl reload
  bind = SUPER,      q,      exec, gtklock -b /home/ruzo/.local/share/hyprland/lock
  # bind = SUPER,      q,      exec, gtklock
  bind = SUPER,      c,      killactive,
  bind = SUPER,      f,      fullscreen, 1
  bind = SUPER,      Space,  togglefloating,
  bind = SUPER,      Return, exec,       wezterm
  bind = SUPER,      x,      exec,       swaync-client -t
  bind = SUPER,      d,      exec,       tofi-run | xargs hyprctl dispatch exec
  bind = SUPER,      o,      exec,       firefox
  bind = SUPERSHIFT, o,      exec,       cat ~/iruzo/quickmarks | tofi | awk -F' ' '{print $NF}' | wl-copy $(cat)
  bind = SUPER,      u,      exec,       keepassxc || flatpak run org.keepassxc.KeePassXC
  bind = SUPERSHIFT, u,      exec,       cat ~/iruzo/contacts 2> /dev/null | tofi | awk -F'-' '{print $NF}' | wl-copy $(cat)
  # audio
  bind = SUPER,      n,      exec,       pactl set-sink-volume @DEFAULT_SINK@ +05% || wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
  bind = SUPERSHIFT, n,      exec,       pactl set-sink-volume @DEFAULT_SINK@ -05% || wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
  bind = SUPER,      m,      exec,       pactl set-source-mute @DEFAULT_SOURCE@ toggle || wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
  bind = SUPERSHIFT, m,      exec,       pactl set-sink-mute @DEFAULT_SINK@ toggle || wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
  bind = SUPER,      p,      exec,       pavucontrol
  bind = SUPERSHIFT, p,      exec,       helvum
  # brightness
  bind = SUPER,      b,      exec,       brightnessctl s +10
  bind = SUPERSHIFT, b,      exec,       brightnessctl s 10-
  # screenshot
  bind = SUPERSHIFT, s,      exec,       mkdir -p ~/media && grim -g "$(slurp)" ~/media/$(date +'%Y%m%d_%H%M%S').png
  bind = SUPERSHIFT, f,      exec,       mkdir -p ~/media && grim -g "$(slurp -o)" ~/media/$(date +'%Y%m%d_%H%M%S').png
  # apps
  bind = SUPER,      g,      exec,       brave --app=https://discord.com/app || chromium --app=https://discord.com/app || chromium-browser --app=https://discord.com/app || firefox --new-instance https://discord.com/login || librewolf --kiosk https://discord.com/login
  bind = SUPER,      i,      exec,       gnome-boxes
  bind = SUPER,      y,      exec,       steam || flatpak run com.valvesoftware.Steam

# windows movement
  bind = SUPER,       h, movefocus,  l
  bind = SUPER,       l, movefocus,  r
  bind = SUPER,       k, movefocus,  u
  bind = SUPER,       j, movefocus,  d
  bind = SUPER SHIFT, h, movewindow, l
  bind = SUPER SHIFT, l, movewindow, r
  bind = SUPER SHIFT, k, movewindow, u
  bind = SUPER SHIFT, j, movewindow, d

# workspace movements
  bind = $SUPER,       1, workspace,       1
  bind = $SUPER,       2, workspace,       2
  bind = $SUPER,       3, workspace,       3
  bind = $SUPER,       4, workspace,       4
  bind = $SUPER,       5, workspace,       5
  bind = $SUPER,       6, workspace,       6
  bind = $SUPER,       7, workspace,       7
  bind = $SUPER,       8, workspace,       8
  bind = $SUPER,       9, workspace,       9
  bind = $SUPER,       0, workspace,       10
  bind = $SUPER SHIFT, 1, movetoworkspace, 1
  bind = $SUPER SHIFT, 2, movetoworkspace, 2
  bind = $SUPER SHIFT, 3, movetoworkspace, 3
  bind = $SUPER SHIFT, 4, movetoworkspace, 4
  bind = $SUPER SHIFT, 5, movetoworkspace, 5
  bind = $SUPER SHIFT, 6, movetoworkspace, 6
  bind = $SUPER SHIFT, 7, movetoworkspace, 7
  bind = $SUPER SHIFT, 8, movetoworkspace, 8
  bind = $SUPER SHIFT, 9, movetoworkspace, 9
  bind = $SUPER SHIFT, 0, movetoworkspace, 10

# Move/resize windows with SUPER + LMB/RMB and dragging
  bindm = $SUPER, mouse:272, movewindow
  bindm = $SUPER, mouse:273, resizewindow

# windows rules
  windowrule = float,          file_progress
  windowrule = float,          confirm
  windowrule = float,          dialog
  windowrule = float,          download
  windowrule = float,          notification
  windowrule = float,          error
  windowrule = float,          splash
  windowrule = float,          confirmreset
  windowrule = float,          title:Open File
  windowrule = float,          title:branchdialog
  windowrule = float,          Lxappearance
  windowrule = animation none, rofi
  windowrule = float,          viewnior
  windowrule = float,          feh
  windowrule = float,          pavucontrol-qt
  windowrule = float,          pavucontrol
  windowrule = float,          file-roller
  windowrule = float,          wlogout
  windowrule = float,          title:wlogout
  windowrule = float,          title:wlogout
  windowrule = float,          title:^(Media viewer)$
  windowrule = float,          title:^(Volume Control)$
  windowrule = float,          title:^(Picture-in-Picture)$
  windowrule = size 800 600,   title:^(Volume Control)$
